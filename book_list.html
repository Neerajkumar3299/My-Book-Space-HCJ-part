<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Store</title>
    
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
    <link rel="icon"
        href="https://cdn3.iconfinder.com/data/icons/buildings-3-4/129/118-512.png"
        type="image/x-icon">
        <link rel="stylesheet" href="css/book_list.css" >
</head>

<body>
    <div class="container">
        <div class="header">
            <div class="logo">
                <img src="https://cdn.iconscout.com/icon/premium/png-256-thumb/bookstore-2579193-2148813.png"
                    alt="logo-image">
                <a href="https://neerajkumar3299.github.io/My-Book-Space-HCJ-part/">
                    <h2>Ny.BookStore</h2>
                </a>
            </div>
            <div class="search_bar">
                <form>
                    <input type="text" placeholder="search book" name="book" />
                    <button class="btn">Search</button>
                </form>
            </div>
        </div>
        <div class="section">
            <div class="table">
                <table id="table">
                    <thead>
                        <tr>
                            <th>Book Image</th>
                            <th>Book Name</th>
                            <th>Subject Name</th>
                            <th>Author</th>
                            <th>Download Link</th>
                            <th>Operation</th>
                        </tr>
                    </thead>
                    
                    <tbody id="tbody">

                    </tbody>
                </table>
            </div>
        </div>

         <!-- Footer - Section -->
         <div class="footer">
            <div class="footer-part" id="left">
                <h3>Follow Us</h3>
                <hr>
                <a href="https://www.instagram.com/neerajyadav470/"><i class="fab fa-instagram"></i></a>
                    <a href=""><i class="fab fa-twitter"></i></a>
                        <a href="https://www.facebook.com/profile.php?id=100027739233310">  <i class="fab fa-facebook"></i></a>
                            <a href="https://www.linkedin.com/in/neerajkumar-yadav-503536218/"><i class="fab fa-linkedin"></i></a>
            </div>
            <div class="footer-part" id="middle">
                <h3>My Details</h3>

                <hr>
                <div class="part">
                    <i class="fas fa-phone"></i><span><a href="tel:9565439966">Call me at +9565439966</a></span>
                </div>
                <div class="part">
                    <i class="fas fa-envelope-square"></i><span><a href = "mailto:ny587227@gmail.com?subject = Feedback&body = Message">
                        Mail Me
                        </a></span>
                </div>
                <div class="part">
                    <i class="fas fa-street-view"></i><span>Dahisar(E), Mumbai, Maharastra-400068</span>
                </div>
               
            </div>
            <div class="footer-part" id="right">
                <h3>Contact Us</h3>
                <hr>
                <div class="contact-us">
                    <form>
                        <input type="text" placeholder="Enter Your name">
                        <input type="email" placeholder="Enter Email id">
                        <textarea type="text" placeholder="Write Message"></textarea>

                        <button>Send me</button>
                    </form>
                </div>
               
            </div>
        </div>
    </div>
    <script src="/script.js"></script>
    <script>
        
api_url="https://mypersonalbookstore2022.herokuapp.com/book_list"

function printData(data){
    let table=document.getElementById("tbody");
    var output_str=""
    for(let i=0;i<data.length;i++){
        output_str=output_str+`<tr>`
        output_str=output_str+`<td> <img src='${data[i]['book_image_link']}' alt=book-image/></td>`
        output_str=output_str+`<td> ${data[i]['book_name']}</td>`
        output_str=output_str+`<td> ${data[i]['sub_name']}</td>`
        output_str=output_str+`<td> ${data[i]['author']}</td>`
        output_str=output_str+`<td> <a href='${data[i]['download_link']}'>download</a></td>`
        output_str=output_str+`<td><button onclick=updateData('${data[i]._id}')><i class="fas fa-pen"></i></button><button onclick=deleteData('${data[i]._id}')><i class="fas fa-trash-alt" ></i></button></td>`
        output_str=output_str+`</tr>`
    }
    
    table.innerHTML=output_str
}
function getData(){
    console.log("Hello Neeraj kumar How are you!!")
    fetch(api_url)
    .then((data)=>data.json())
    .then((data)=>{
        printData(data)
    })
}
getData()
function insertData(){
    let image_link=document.getElementById("image_link").value
    let book_name=document.getElementById("book_name").value
    let sub_name=document.getElementById("sub_name").value
    let author_name=document.getElementById("author_name").value
    let download_link=document.getElementById("download_link").value
    
    data={
        book_image_link:image_link,
        book_name:book_name,
        sub_name:sub_name,
        author:author_name,
        download_link:download_link
    }
    options={
        "method":"POST",
        headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json'
          },
          body:JSON.stringify(data)
    }
    fetch(api_url,options)
    .then((response)=>response.json())
    .then((data)=>{
        console.log(data)
        window.location.href = "https://neerajkumar3299.github.io/My-Book-Space-HCJ-part/book_list.html";
        
    })
}

function deleteData(id){
    options={
        method:"DELETE",
        headers:{
            'Accept':'application/json',
            'Content-Type':'application/json',
        },
        body:JSON.stringify({'_id':id})
    }
    fetch(api_url,options)
    .then((response)=>response.json())
    .then((data)=>{
        console.log(data)
        window.location.reload(true);
    })
}

function updateData(id){
    console.log(id+"Update")
}

    </script>
</body>

</html>